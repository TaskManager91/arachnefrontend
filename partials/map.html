<div ng-controller="SearchCtrl as searchCtrl">
	<div class="row fullscreenrow">

		<!-- Loading-Icon -->
		<div ng-hide="searchresults.size >= 0" class="loading"></div>

		<!-- Meldung für leeres Suchergebnis -->
		<div ng-if="searchresults.size == 0">
			<div class="row" style=" height:{{screenHeight}}px;">
				<div class="col-md-4 col-md-offset-4 text-center">
					Keine Ergebnisse gefunden.
				</div>
			</div>
		</div>

		<!-- Seitenleiste -->
        <div ng-show="searchresults.facets" id="mapNavigation" class="col-md-2 well well-sm"
        		style="background-color: rgba(248, 248, 248, 0.8);position: absolute; top: 60px; bottom:10px; right: 10px; overflow-y:auto; z-index:9999;">
        	<div ng-if="currentQueryParameters.fl"class="alert alert-info">
        		<b>Hinweis</b><br>
        		Diese Ansicht zeigt die <b>{{currentQueryParameters.fl}} am häufigsten referenzierten Orte</b> in Arachne. Für eine genauere Auflösung benutzen Sie bitte die Filter unten.
        	</div>

    		<a href="search/?q={{currentQueryParameters.q}}&fq={{currentQueryParameters.fq}}" type="button"
    				class="btn btn-primary btn btn-block">
    			Ausgewählte Objekte &nbsp; <i class="glyphicon glyphicon-arrow-right"> </i>
    		</a>
    		<div style="margin-top:10px;">
				<small ng-if="searchresults.size" class="text-muted">
					Insgesamt <b>{{ searchresults.size }}</b> Ergebnisse.
				</small>
			</div>
			<div>
				<h6 class="text-muted uppercase"><strong>Typ der Ortsangabe</strong></h6>
				<div class="btn-group btn-group-justified" ng-init="locationfacetname = 'facet_fundort'">
					<div class="btn-group">
						<button class="btn btn-default" ng-click="locationfacetname = 'facet_fundort'"
								ng-class="{'active': locationfacetname == 'facet_fundort'}" role="button">
							<small>Fundort</small>
						</button>
					</div>
					<div class="btn-group">
						<button class="btn btn-default" ng-click="locationfacetname = 'facet_aufbewahrungsort'"
								ng-class="{'active': locationfacetname == 'facet_aufbewahrungsort'}"
								role="button">
							<small>Aufbewahrungsort</small>
						</button>
					</div>
				</div>
			</div>
			<div ng-if="currentQueryParameters.q">
				<h6 class="text-muted uppercase"><strong>Suchbegriff</strong></h6>
				{{currentQueryParameters.q}}
			</div>

			<div ng-if="activeFacets.length">
				<h6 class="text-muted uppercase"><strong>Aktive Filter</strong></h6>
    			<button class="btn btn-sm btn-block btn-default linethrough-hover"
    					ng-click="removeFacet(facet)" ng-repeat="facet in activeFacets" style="margin-right:2px">
    				<i>{{facet.name | i18n}}</i> <b style="text-transform:capitalize;">{{facet.value}}</b>
    			</button>
			</div>

    		
			<small>
				<h6 class="text-muted uppercase"><strong>Weitere Filter</strong></h6>
				<ul class="list-unstyled facet" ng-repeat="facet in searchresults.facets">
					<button class="btn btn-xs btn-default" ng-click="openfacet =! openfacet"
							ng-class="{ 'active': openfacet }">
						<b class="text-muted">{{facet.name | i18n }}</b>
					</button>
					<li ng-click="addFacet(facet.name, facetValue.value)"
							ng-repeat="facetValue in facet.values" ng-show="openfacet">
						<b class="pull-right text-muted">{{facetValue.count}}</b>{{facetValue.value}}
					</li>
				</ul>

			</small>
    	</div>

    	<!-- Karte -->
        <div map ng-if="searchresults.size > 0" searchresults="searchresults" locationfacetname="locationfacetname"
        		class="col-md-12 fullscreenMap" id="map">

	</div>

</div>