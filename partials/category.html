<div ng-controller="SearchCtrl as searchCtrl">
	<div class="row fullscreenrow">
		<div ng-hide="resultSize" class="loading"></div>

        <div map ng-if="resultSize"
        		locationfacetname="locationfacetname"
        		facets="facets"
        		current-query="currentQuery"
        		class="col-md-12 halfscreenMap" id="map"></div>

	</div>
	<div class="row" ng-show="facets">
		<div class="col-md-6 col-md-offset-1">
			<div class="page-header">
				<h2 ng-show="currentQuery.facets.facet_kategorie">{{ currentQuery.facets.facet_kategorie }}</h2>
				<h2 ng-hide="currentQuery.facets.facet_kategorie">Alle Datensätze in Arachne</h2>
			</div>
			
			<accordion class="accordion-with-list" close-others="oneAtATime">
				<accordion-group heading="{{facet.name | i18n }}" ng-repeat="facet in facets" >
					<a ng-repeat="facetValue in facet.values"
							ng-href="category/{{currentQuery.addFacet(facet.name,facetValue.value).toString()}}"
							class="list-group-item">
						<span class="badge">{{facetValue.count}}</span>
						{{facetValue.value}}
					</a>
			    </accordion-group>
			</accordion>
			
		</div>
		<div class="col-md-3 col-md-offset-1 well well-sm" style="margin-top:-40px">
			
			<a href="search/?q={{currentQueryParameters.q}}&fq={{currentQueryParameters.fq}}" type="button" class="btn btn-primary btn-lg btn-block">Ausgewählte Objekte &nbsp; <i class="glyphicon glyphicon-arrow-right"> </i></a>
			<h6 class="text-muted uppercase"><strong>Typ der Ortsangabe</strong></h6>
				<div class="btn-group btn-group-justified" ng-init="locationfacetname = 'facet_fundort'">
					<div class="btn-group">
						<button class="btn btn-default" ng-click="locationfacetname = 'facet_fundort'" ng-class="{'active': locationfacetname == 'facet_fundort'}" role="button"><small>Fundort</small></button>
					</div>
					<div class="btn-group">
						<button class="btn btn-default" ng-click="locationfacetname = 'facet_aufbewahrungsort'" ng-class="{'active': locationfacetname == 'facet_aufbewahrungsort'}"  role="button"><small>Aufbewahrungsort</small></button>
					</div>
				</div>
			<hr>

			<div ar-active-facets route="category" current-query="currentQuery"></div>

			<hr>
			<h4 class="pull-left">Ergebnisse in Arachne</h4>
			<h2 class="pull-right">{{resultSize}}</h2>
				
			
		</div>
		<div class="col-md-6">			

		</div>
	</div>
</div>
