<script type="text/ng-template" id="section_template.html">
	
	<li ng-if="section.value">
		<div ng-switch="isArray(section.value)">
			<span ng-switch-when="false" ng-bind-html="section.value"></span>
			<ul ng-switch-when="true">
				<li ng-repeat="valueItem in section.value" ng-bind-html="valueItem"></li>
			</ul>
		</div>
	</li>



	<ul ng-if="!section.value">
		<b>{{section.label}}</b>
		<li ng-repeat="section in section.content" ng-include="'section_template.html'"></li>
	</ul>

</script>

<div class="row"  ng-controller="EntityCtrl as entityCtrl">

	<script type="text/ng-template" id="bookmarkForm.html">
        <div class="modal-header">
			<h4 class="modal-title"><img src="img/arachnelogo.png" style="height: 36px; opacity: 0.43; width: 36px;"></img>Add-Bookmark</h4>
		</div>
		<div class="modal-body">
			Select a Bookmark:
			<ul>
                <li ng-repeat="bk in bookmarks">
                    <a ng-click="selectedBK = bk">{{ bk }}</a>
                </li>
            </ul>
		</div>
		<div class="modal-footer">
            <button class="btn btn-primary" ng-click="ok()">OK</button>
            <button class="btn btn-warning" ng-click="cancel()">Cancel</button>
        </div>
    </script>

	<div class="col-md-2" style="padding-top:40px" ng-show="currentSearch">
		<b class="text-muted small uppercase">Aktuelle Suche</b><br>
		Suche nach <b>{{currentSearch.queryParams.q}}</b>

		<div>
			{{currentSearch.queryParams.fq}}	
		</div>

		<div class="row" ng-repeat="entityCurrent in currentSearch.results.entities" ng-if="entity.entityId == entityCurrent.entityId">
			<div ng-if="$index-1 >= 0">
				<a href="entity/{{ currentSearch.results.entities[$index-1].entityId }}" >
					<button type="button" class="btn btn-default btn-lg"> 
						<span class="glyphicon glyphicon-arrow-left" ></span>
					</button>
				</a>
			</div>
			<div ng-if="!$last">
				<a href="entity/{{ currentSearch.results.entities[$index+1].entityId }}" >
				<button type="button" class="btn btn-default btn-lg"> 
					<span class="glyphicon glyphicon-arrow-right" ></span>
				</button>
				</a>
			</div>
		</div>
	</div>
	<div class="col-md-6">
		<div class="page-header">
			
			<h3>
				{{ entity.title }} &nbsp; <small>{{ entity.subtitle }}</small>
			</h3>

		</div>
		
	
		{{entity.sections.label}}
		<div ng-repeat="section in entity.sections.content" ng-include="'section_template.html'"></div>		
		
	</div>
	<div class="col-md-4">
		<button type="button" class="btn btn-default" ng-click="openBookmarkModal()">Bookmark!</button>
		<div class="Bilder-Container" ng-if="entity.thumbnailId">
			Image preview: (click to enlarge)
			<a href="entity/image/{{ entity.thumbnailId }}"><img ng-src="http://crazyhorse.archaeologie.uni-koeln.de/arachnedataservice/image/height/{{ entity.thumbnailId }}?height=300"></img></a>
		</div>
	</div>
</div>