<div  ng-controller="SearchCtrl as searchCtrl">

	<div class="col-md-2">
		<div>
			<small class="text-muted">Insgesamt <b>{{ search.size }}</b> Ergebnisse</small>
		</div>
		<small>

			<ul class="list-unstyled facet" ng-repeat="(facetName,values) in search.facets">
				<button class="btn btn-xs btn-default" ng-click="openfacet =! openfacet" ng-class="{ 'active': openfacet }"><b class="text-muted">{{facetName | i18n }}</b></button>
				<li ng-click="searchCtrl.addFacet(facetName, facetValue)"  ng-repeat="(facetValue, count) in values" ng-show="openfacet">
					<b class="pull-right text-muted">{{count}}</b>{{facetValue}}
				</li>
			</ul>

		</small>
	</div>

	<div class="col-md-10" ng-switch="listStyle">
		<p ng-hide="search.entities.length">Lädt...</p>
		<div style="margin-bottom:20px">
			<button class="btn btn-xs linethrough-hover" ng-click="searchCtrl.removeFacet(facet)" ng-repeat="facet in activeFacets" style="margin-right:2px"><i>{{facet.name | i18n}}</i> <b style="text-transform:capitalize;">{{facet.value}}</b></button> 	
			<div class="btn-group pull-right">
				<button class="btn btn-xs" ng-click="listStyle = 'list'" ng-class="{ 'active': listStyle == 'list' || listStyle == undefined }">Liste</button>
				<button class="btn btn-xs" ng-click="listStyle = 'tiles'" ng-class="{ 'active': listStyle == 'tiles' }">Kacheln</button>
			</div>
		</div>
		<br><br>

		<table class="table table-condensed table-hover" ng-switch-default="list">
			<tr ng-repeat="entity in search.entities" class="small"	>
				<td class="col-md-1">{{entity.entityId}}</td>
				<td class="col-md-1" style="text-transform:capitalize; cursor:pointer;" ng-click="searchCtrl.addFacet('facet_kategorie', entity.type)">{{entity.type}}</td>
				<td class="col-md-8"><b><a href="entity/{{entity.entityId}}">{{entity.title}}</a></b></td>
				<td class="col-md-2">{{entity.subtitle}}</td>
			</tr>
		</table>
		<div id="tiledImagesContainer" ng-switch-when="tiles">
			<div ng-repeat="entity in search.entities">
				<div ng-if=" $index % 5 == 0" imagesrow class="imagesrow">
					<span arachneImageRequest="height" arachneImageHeight="300" arachneImageId="{{search.entities[$index].thumbnailId}}"></span>
					<span arachneImageRequest="height" arachneImageHeight="300" arachneImageId="{{search.entities[$index+1].thumbnailId}}"></span>
					<span arachneImageRequest="height" arachneImageHeight="300" arachneImageId="{{search.entities[$index+2].thumbnailId}}"></span>
					<span arachneImageRequest="height" arachneImageHeight="300" arachneImageId="{{search.entities[$index+3].thumbnailId}}"></span>
					<span arachneImageRequest="height" arachneImageHeight="300" arachneImageId="{{search.entities[$index+4].thumbnailId}}"></span>
				</div>
			</div>
		</div>
	</div>	

	<p align="center">
		<button ng-click="searchCtrl.append()" ng-if="search.size > 50" class="btn btn-primary"><span class="glyphicon glyphicon-plus"></span> nächste Seite</button>
	</p>

</div>
