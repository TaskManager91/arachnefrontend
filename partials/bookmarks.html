<div ng-controller="BookmarksController as bookmarksController">

	<!--################################################ MODALS #####################################################################-->
	<script type="text/ng-template" id="deleteBookmarksList.html">
		<div class="modal-header">
			<h4 class="modal-title"><img src="img/arachnelogo.png" style="height: 36px; opacity: 0.43; width: 36px;"></img> Liste löschen:
			</h4>
		</div>
		<div class="modal-body">
			<h3>Die Liste wirklich löschen?</h3>	
		</div>
		<div class="modal-footer">
            	<button class="btn btn-primary" ng-click="$close(id,name)">Ja</button>
            	<button class="btn btn-warning" ng-click="$dismiss()">Nein</button>
        </div>
	</script> 
	<script type="text/ng-template" id="createBookmarksList.html">
		<div class="modal-header">
			<h4 class="modal-title"><img src="img/arachnelogo.png" style="height: 36px; opacity: 0.43; width: 36px;"></img> Neue Liste anlegen:
			</h4>
		</div>
		<div class="modal-body">
			<div class="form-group">
				<input type="name" class="form-control" ng-model="name" placeholder="Name">
			</div>
			<div class="form-group">
				<input type="commentary" class="form-control" ng-model="commentary" placeholder="commentary">
			</div>
		</div>
		<div class="modal-footer">
            	<button class="btn btn-primary" ng-click="$close(name, commentary)">OK</button>
            	<button class="btn btn-warning" ng-click="$dismiss()">Cancel</button>
        </div>
	</script> 
	<script type="text/ng-template" id="updateBookmarkModal.html">
		<div class="modal-header">
			<h4 class="modal-title"><img src="img/arachnelogo.png" style="height: 36px; opacity: 0.43; width: 36px;"></img> Neuen Kommentar eingeben:
			</h4>
		</div>
		<div class="modal-body">
			<div class="form-group">
				<input type="commentary" class="form-control" ng-model="commentary" placeholder="commentary">
			</div>
		</div>
		<div class="modal-footer">
            	<button class="btn btn-primary" ng-click="$close(commentary)">OK</button>
            	<button class="btn btn-warning" ng-click="$dismiss()">Cancel</button>
        </div>
	</script> 

	<!--################################################ SITE #####################################################################-->
	<div ng-if="bmStatus == 404">
		<p>keine Liste vorhanden, bitte eine erstellen!</p>
	</div>

	<div ng-if="bmStatus == 403" class="col-md-12 text-right alert alert-info">
		Für Notizen und Lesezeichen, bitte anmelden <span class="glyphicon glyphicon-share-alt" style="transform:rotate(90deg) scaleX(-1); margin: 0 35px; font-size: 20px;"></span>
	</div>
	<div class="col-md-7" ng-if="bmStatus == 0 || bmStatus == 404">
		<div class="page-header">
			<button type="button" class="btn btn-link pull-right" ng-click="createBookmarksListModal()">Neue Liste anlegen</button>
			<h3><span style="color: rgb(66,139,202); margin-right:10px" class="glyphicon glyphicon-inbox"> </span> Ihre Notizen & Lesezeichen</h3>

		</div>
		<accordion class="accordion-with-list" ng-repeat="bookmarksList in bookmarksLists" >
			<accordion-group  is-open="false">
	    	<accordion-heading>
	    			{{ bookmarksList.name }}<small> {{ bookmarksList.commentary }} </small> <button type="button" class="btn btn-xs btn-link" ng-click="deleteBookmarksListModal(bookmarksList.id, bookmarksList.name)">löschen</button><span class="badge pull-right">{{bookmarksList.bookmarks.length}}</span>
	    	</accordion-heading>
	    		<div ng-repeat="bookmark in bookmarksList.bookmarks"class="list-group-item clearfix">
	    			
					<div class="row-fluid">
						<div class="btn-group pull-right">
	    					<button type="button" class="btn btn-sm " ng-click="updateBookmarkModal(bookmark.id)"><span class="glyphicon glyphicon-pencil"></span></button>
	    					<button type="button" class="btn btn-sm " ng-click="deleteBookmark(bookmark)"><span class="glyphicon glyphicon-trash"></span></button>
						</div>


		    			<div class="col-md-2 col-xs-2" ng-if="bookmark.thumbnailId">
							<a href="entity/{{bookmark.entityId}}/image/{{ bookmark.thumbnailId }}">
								<img width="100%" ng-src="{{dataserviceUri}}/arachnedataservice/image/thumbnail/{{ bookmark.thumbnailId }}"/>
							</a>
						</div>
						<div class="pull-left" ng-if="!bookmark.thumbnailId">
							<img  class="img-thumbnail" width="50" height="50" ng-src="img/imagePlaceholder.png"></img></a>
						</div>
						<div class="col-md-8">
							<a href="entity/{{ bookmark.arachneEntityId }}" class="title small" >{{ bookmark.title }}</a><br>
							<b>Notiz:</b> {{ bookmark.commentary }}
						</div>
					</div>
					
  				</div>
	    	</accordion-group>
	  	</accordion>
	  	
  	</div>
  	<div class="col-md-5" ng-if="bmStatus == 0 || bmStatus == 404">
		<div class="page-header">
			<button class="btn btn-danger pull-right" ng-click="bookmarksController.logout()">Abmelden &nbsp; <span class="glyphicon glyphicon-log-out"></span></button>
			<h3>Ihr Profil</h3>
		</div>

		<ul class="list-group">
			<li class="list-group-item">
				<small class="text-muted">Nutzername</small> <span class="pull-right">{{user.username}}</span>
			</li>
			<li class="list-group-item">
				<small class="text-muted">Vorname</small> <span class="pull-right">{{user.firstname}}</span>
			</li>
			<li class="list-group-item">
				<small class="text-muted">Nachname</small> <span class="pull-right">{{user.lastname}}</span>
			</li>
		</ul>

	</div>
</div>