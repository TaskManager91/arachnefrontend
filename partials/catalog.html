<script type="text/ng-template" id="entry_template.html">
	
	<accordion class="accordion-with-list col-md-10" >
	<accordion-group heading="{{ entry.label }}">
    	<div class="list-group-item">
			<div class="btn-group pull-right">
				<button type="button" class="btn btn-sm btn-link" ng-click="updateEntry(entry)"><span class="glyphicon glyphicon-pencil"></span></button>
				<button type="button" class="btn btn-sm btn-link" ng-click="deleteEntry(entry)"><span class="glyphicon glyphicon-trash"></span></button>
			</div>
    		<div ng-if="entry.label">Label: {{ entry.label }} </div>
    		<div ng-if="entry.arachneEntityId">ArachneId: {{ entry.arachneEntityId }} </div>
    		<small ng-if="entry.text">Kommentar: <br> {{ entry.text }}</small>
    	</div>
    	<div ng-if="entry.children.length == 0"  class="list-group-item clearfix">
    		In diesem Entry sind noch keine Entries vorhanden.
    		<button type="button" class="btn btn-link pull-right" ng-click="createEntry(0, entry.id)">
				<span class="glyphicon glyphicon-plus"></span> Neuen Entry anlegen 
			</button>
    	</div>
    	<div ng-if="entry.children.length != 0" >
	    	<div ng-repeat="entry in entry.children" ng-include="'entry_template.html'">
	    	</div>
	    	<button type="button" class="btn btn-link pull-right" ng-click="createEntry(0, entry.id)">
				<span class="glyphicon glyphicon-plus"></span> Neuen Entry anlegen 
			</button>
	    </div>
	</accordion-group>
	</accordion>
</script>
<div ng-controller="CatalogController as catalogController">
	<div  ng-if="!user.username" class="col-md-12 text-right alert alert-info">
		FÃ¼r Catalogs bitte anmelden <span class="glyphicon glyphicon-share-alt" style="-webkit-transform:rotate(90deg) scaleX(-1); transform:rotate(90deg) scaleX(-1); margin: 0 35px; font-size: 20px;"></span>
	</div>
	<div class="col-md-8 col-md-offset-2" ng-if="user.username">
		<div class="page-header">
			<button type="button" class="btn btn-link pull-right" ng-click="createCatalog()">
				<span class="glyphicon glyphicon-plus"></span> Neuen Catalog anlegen 
			</button>
			<h3><span style="color: rgb(66,139,202); margin-right:10px" class="glyphicon glyphicon-inbox"> </span> Ihre Catalogs</h3>
		</div>

		<div ng-if="catalogs.length == 0">
			Keine Catalogs vorhanden.
		</div>
		<accordion class="accordion-with-list" ng-repeat="catalog in catalogs" >
			<accordion-group heading="{{ catalog.label }}">
		    	<div class="list-group-item">
					<div class="btn-group pull-right">
    					<a type="button" class="btn btn-sm btn-link" ng-href="search/{{catalog.query.toString()}}"><span class="glyphicon glyphicon-search"></span></a>
    					<button type="button" class="btn btn-sm btn-link" ng-click="updateCatalog(catalog.id)"><span class="glyphicon glyphicon-pencil"></span></button>
    					<button type="button" class="btn btn-sm btn-link" ng-click="deleteCatalog(catalog.id)"><span class="glyphicon glyphicon-trash"></span></button>
					</div>
		    		<div ng-if="catalog.author">Author: {{ catalog.author }} </div>
		    		<small ng-if="catalog.text">Kommentar: <br> {{ catalog.text }}</small>
		    		
		    	</div>
		    	<div ng-if="catalog.catalogEntries.length == 0" >
		    		In diesem Catalog sind noch keine Entries vorhanden.
		    		<button type="button" class="btn btn-link pull-right" ng-click="createEntry(catalog.id, 0)">
						<span class="glyphicon glyphicon-plus"></span> Neuen Entry anlegen 
					</button>
		    	</div>
		    	<div class="row" ng-if="catalog.catalogEntries.length != 0">
			    	<div class="col-md-12" ng-repeat="entry in catalog.catalogEntries" ng-include="'entry_template.html'">
			    	</div>
			    </div>
			    <button type="button" class="btn btn-link pull-right" ng-click="createEntry(catalog.id, 0)">
					<span class="glyphicon glyphicon-plus"></span> Neuen Entry anlegen 
				</button>
	    	</accordion-group>
	  	</accordion>
  	</div>
</div>